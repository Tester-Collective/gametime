<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Seller Transaction History</title>
    <link rel="stylesheet" href="/output.css">
</head>
<body class="bg-tokyo-night-bg text-white">

<div th:include="navbar::navbar" class="shadow-2xl">
</div>

<div class="container mx-auto my-8 px-4">
    <h2 class="text-2xl font-bold mb-4 text-center mt-20">Seller Transaction History</h2>
    <div class="overflow-x-auto relative shadow-md sm:rounded-lg">
        <table class="w-full text-sm text-left text-gray-400">
            <thead class="text-xs text-white-700 uppercase bg-gray-700">
            <tr>
                <th scope="col" class="py-3 px-6">Date</th>
                <th scope="col" class="py-3 px-6">Transaction ID</th>
                <th scope="col" class="py-3 px-6">Items Sold</th>
                <th scope="col" class="py-3 px-6">Total Revenue</th>
                <th scope="col" class="py-3 px-6">Status</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="transaction : ${transactions}" class="bg-gray-800 border-b border-gray-700 hover:bg-gray-600">
                <td class="py-4 px-6">
                    <span th:text="${transaction.transactionDate}"></span>
                </td>
                <td class="py-4 px-6 font-medium text-white whitespace-nowrap">
                    <span th:text="${transaction.transactionId}"></span>
                </td>
                <td class="py-4 px-6">
                    <ul>
                        <li th:each="cartItem : ${transaction.getGamesInCart()}" th:if="${cartItem.game.seller == seller}" th:text="${cartItem.game.title} + ' - ' + ${cartItem.game.platform}"></li>
                    </ul>
                </td>
                <td th:each="revenue, status : ${revenues}" class="py-4 px-6">
                    <span th:if="${transaction.status == 'FAILED'}" th:text="'0'"></span>
                    <span th:unless="${transaction.status == 'FAILED'}" th:text="${revenue}"></span>
                </td>
                <td class="py-4 px-6">
                    <span th:text="${transaction.status}" th:classappend="${'SUCCESS'.equals(transaction.status) ? 'text-green-500' : 'text-red-500'}"></span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

</body>
</html>
